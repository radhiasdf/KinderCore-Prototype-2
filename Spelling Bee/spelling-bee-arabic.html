<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Arabic Spelling Game</title>
  <style>
    body {
      font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
      text-align: center;
      background: #f3f4f6;
      margin: 0;
      padding: 20px;
      overflow-x: hidden;
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    .score-timer {
      display: flex;
      justify-content: space-between;
      margin: 10px 20px;
      font-size: 24px;
    }
    .emoji {
      font-size: 48px;
      margin: 20px;
    }
    .hex-row {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 10px;
    }
    .hex {
      width: 60px;
      height: 60px;
      background: #e5e7eb;
      clip-path: polygon(25% 6.7%, 75% 6.7%, 100% 50%, 75% 93.3%, 25% 93.3%, 0% 50%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      font-weight: bold;
      transition: background 0.3s, transform 0.3s;
    }
    .hex.filled {
      background: #fb923c;
    }
    .hex.fade-out {
      animation: fadeOut 0.5s forwards;
    }
    @keyframes fadeOut {
      to {
        opacity: 0;
        transform: scale(0.1);
      }
    }
    #inputDisplay {
      font-size: 36px;
      margin-bottom: 10px;
      height: 36px;
    }
    #transliterationDisplay {
      font-size: 9vw;
      color: #6b7280;
      margin-bottom: 20px;
      min-height: 1.2em; /* Always takes at least one line of space */
    }
#keyboard {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  padding: 10px;
  width: 100%;
  box-sizing: border-box;
}

.keyboard-row {
  display: flex;
  justify-content: center;
  gap: 4px;
  white-space: nowrap;
  overflow-x: hidden; /* prevent wrapping and scroll */
  width: 100%;
}

.key {
  font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
  font-size: 7vw; /* Responsive sizing */
  padding: 1.5vw;
  width: 8vw;
  height: 11vw;
  text-align: center;
  border-radius: 6px;
  border: none;
  background: #e1e1e1;
  box-shadow: 0 2px 4px rgba(0,0,0,0);
}
    .btn {
      font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 6vw;
      cursor: pointer;
      text-align: center;
      border-radius: 6px;
      border: none;
      background: #e1e1e1;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    #game-over {
      display: none;
      font-size: 28px;
      color: rgb(155, 9, 9);
      margin-top: 20px;
    }
    #restartButton {
      margin-top: 20px;
      font-size: 30px;
    }

    
  </style>
</head>
<body>
  <div class="score-timer">
    <div>‚è± <span id="timer"></span></div>
    <div>‚≠ê <span id="score">0</span></div>
  </div>
  <div class="emoji" id="emoji"></div>
  <div class="hex-row" id="hexRow"></div>
  <div id="inputDisplay"></div>
  <div id="transliterationDisplay"></div>

  <div class="keyboard" id="keyboard"></div>
  <button class="btn" onclick="handleBackspace()">‚å´ Backspace</button>
  <button class="btn" onclick="skipWord()">Skip ‚è≠</button>
  <div id="game-over">ÿßŸÜÿ™ŸáŸâ ÿßŸÑŸàŸÇÿ™ - Game Over<button class="btn" onclick="resetGame()">ÿßŸÑÿπÿ® ŸÖÿ¨ÿØÿØŸãÿß - Play Again</button></div>

  <div id="history" style="margin-top: 20px; text-align: center;"></div>

  <audio id="correctSound" src="correct-6033.mp3"></audio>


  <script>
    const words = [
      { word: "ÿßÿ≥ÿØ", emoji: "ü¶Å", latin: "asad" },
      { word: "ŸÜŸÖÿ±", emoji: "üêØ", latin: "namir" },
      { word: "ŸÇÿ∑ÿ©", emoji: "üê±", latin: "qittah" },
      { word: "ŸÉŸÑÿ®", emoji: "üê∂", latin: "kalb" },
      { word: "ÿ®ŸÇÿ±ÿ©", emoji: "üêÑ", latin: "baqarah" },
      { word: "ŸÅŸäŸÑ", emoji: "üêò", latin: "feel" },
      { word: "ÿ≤ÿ±ÿßŸÅÿ©", emoji: "ü¶í", latin: "zarafah" },
      { word: "ŸÇÿ±ÿØ", emoji: "üêí", latin: "qird" },
      { word: "ÿ∞ÿ¶ÿ®", emoji: "üê∫", latin: "thi‚Äôb" },
      { word: "ÿ´ÿπŸÑÿ®", emoji: "ü¶ä", latin: "tha‚Äôlab" },
      { word: "ÿØÿ®", emoji: "üêª", latin: "dubb" },
      { word: "ŸÜÿ≠ŸÑ", emoji: "üêù", latin: "nahl" },
      { word: "ÿ≥ŸÑÿ≠ŸÅÿßÿ©", emoji: "üê¢", latin: "sulhufah" },
      { word: "ÿ≥ŸÖŸÉ", emoji: "üêü", latin: "samak" },
      { word: "ÿ≠Ÿàÿ™", emoji: "üêã", latin: "hoot" },
      { word: "ÿØŸàŸÑŸÅŸäŸÜ", emoji: "üê¨", latin: "dawlfyn" },
      { word: "ÿ≠ÿµÿßŸÜ", emoji: "üêé", latin: "hisan" },
      { word: "ÿØŸäŸÉ", emoji: "üêì", latin: "deek" },
      { word: "ÿ®ÿ∑ÿ©", emoji: "ü¶Ü", latin: "battah" },
      { word: "ÿ£ÿ±ŸÜÿ®", emoji: "üêá", latin: "arnab" },
      { word: "ÿ≠ŸÖÿßŸÖÿ©", emoji: "üïäÔ∏è", latin: "hamamah" },
      { word: "ÿπŸÜŸÉÿ®Ÿàÿ™", emoji: "üï∑Ô∏è", latin: "ankabuut" },
      { word: "ÿ´ÿπÿ®ÿßŸÜ", emoji: "üêç", latin: "thu'baan" },
      { word: "ŸÅÿ£ÿ±", emoji: "üê≠", latin: "fa‚Äôr" },
      { word: "ÿØÿ¨ÿßÿ¨ÿ©", emoji: "üêî", latin: "dajajah" },
      { word: "ÿÆÿ±ŸàŸÅ", emoji: "üêë", latin: "kharuuf" },
      { word: "ÿ¨ŸÖŸÑ", emoji: "üê´", latin: "jamal" },
      { word: "ÿ™ŸÖÿ≥ÿßÿ≠", emoji: "üêä", latin: "timsaah" },
      { word: "ÿ∑ÿßŸàŸàÿ≥", emoji: "ü¶ö", latin: "taawuus" },
      { word: "ÿ∂ŸÅÿØÿπ", emoji: "üê∏", latin: "difdaa'" }
    ];

    const keyboardLayout = [
      ["ÿ∂", "ÿµ", "ÿ´", "ŸÇ", "ŸÅ", "ÿ∫", "ÿπ", "Ÿá", "ÿÆ", "ÿ≠", "ÿ¨"],
      ["ÿ¥", "ÿ≥", "Ÿä", "ÿ®", "ŸÑ", "ÿß", "ÿ™", "ŸÜ", "ŸÖ", "ŸÉ", "ÿ∑"],
      ["ÿ∞", "ÿ¶", "ÿ°", "ÿ§", "ÿ±", "Ÿâ", "ÿ©", "Ÿà", "ÿ≤", "ÿ∏", "ÿØ"]
    ];

    let currentIndex = Math.floor(Math.random() * words.length);
    let input = "";
    let score = 0;
    let timer = 120;
    let countdown;
    let gameRunning = true;
    

    const emojiEl = document.getElementById("emoji");
    const hexRow = document.getElementById("hexRow");
    const keyboard = document.getElementById("keyboard");
    const timerEl = document.getElementById("timer");
    const scoreEl = document.getElementById("score");
    const gameOverEl = document.getElementById("game-over");
    const inputDisplay = document.getElementById("inputDisplay");
    const transliterationDisplay = document.getElementById("transliterationDisplay");
    const correctSound = document.getElementById('correctSound');

    function startGame() {
      gameRunning = true;
      displayWord();
      renderKeyboard();
      document.addEventListener("keydown", handlePhysicalKeyboard);
      countdown = setInterval(() => {
        timer--;
        timerEl.textContent = timer;
        if (timer === 0) {
          clearInterval(countdown);
          gameRunning = false;
          gameOverEl.style.display = "block";
        }
      }, 1000);
    }

    function displayWord() {
      const { word, emoji } = words[currentIndex];
      emojiEl.textContent = emoji;
      hexRow.innerHTML = "";
      inputDisplay.textContent = "";
      transliterationDisplay.textContent = "";
      for (let i = 0; i < word.length; i++) {
        const hex = document.createElement("div");
        hex.className = "hex";
        hexRow.appendChild(hex);
      }
    }

    function renderKeyboard() {
    keyboard.innerHTML = "";
    keyboardLayout.forEach(row => {
        const rowDiv = document.createElement("div");
        rowDiv.className = "keyboard-row";
        row.slice().reverse().forEach(key => { // Reverse the row
        const btn = document.createElement("button");
        btn.className = "key";
        btn.textContent = key;
        btn.onclick = () => handleLetter(key);
        rowDiv.appendChild(btn);
        });
        keyboard.appendChild(rowDiv);
    });
    }

    function handleLetter(letter) {
      if (!gameRunning) return;
      const currentWord = words[currentIndex].word;
      if (input.length < currentWord.length) {
        input += letter;
        const hex = hexRow.children[input.length - 1];
        hex.classList.add("filled");
        hex.textContent = letter;
        inputDisplay.textContent = input;
        if (input === currentWord) {
          correctSound.play();
          addToHistory(currentWord.word, words[currentIndex].latin, words[currentIndex].emoji);
          score += currentWord.length;
          scoreEl.textContent = score;
          transliterationDisplay.textContent = words[currentIndex].latin;
          Array.from(hexRow.children).forEach(hex => hex.classList.add("fade-out"));
          setTimeout(() => {
            input = "";
            currentIndex = Math.floor(Math.random() * words.length);
            displayWord();
          }, 600);
        }
      }
    }

    function handleBackspace() {
      if (!gameRunning) return;
      if (input.length > 0) {
        input = input.slice(0, -1);
        const hex = hexRow.children[input.length];
        hex.classList.remove("filled");
        hex.textContent = "";
        inputDisplay.textContent = input;
      }
    }

    function handlePhysicalKeyboard(e) {
      if (!gameRunning) return;
      const letter = e.key;
      if (letter === "Backspace") {
        handleBackspace();
      } else if (/^[\u0600-\u06FF]$/.test(letter)) {
        handleLetter(letter);
      }
    }

    function skipWord() {
      if (!gameRunning) return;
      const currentWord = words[currentIndex];
      input = currentWord.word;
      inputDisplay.textContent = input;
      transliterationDisplay.textContent = currentWord.latin;
      Array.from(hexRow.children).forEach((hex, idx) => {
        hex.classList.add("filled");
        hex.textContent = currentWord.word[idx];
      });
      addToHistory(currentWord.word, words[currentIndex].latin, words[currentIndex].emoji);
      setTimeout(() => {
        input = "";
        currentIndex = Math.floor(Math.random() * words.length);
        displayWord();
      }, 1000);
    }

    function addToHistory(arabicWord, latinWord, emoji) {
      const historyEl = document.getElementById("history");
      const entry = document.createElement("div");
      entry.innerHTML = `<span style="font-size: 24px;">${emoji}</span> 
                        <span style="font-size: 28px;">${arabicWord}</span> 
                        <span style="font-size: 28px; color: gray;">(${latinWord})</span>`;
      entry.style.margin = "10px 0";
      historyEl.prepend(entry); // Adds to the top of the history list
    }

    function resetGame() {
      timer = 120;
      score = 0;
      currentIndex = Math.floor(Math.random() * words.length);
      input = "";
      timerEl.textContent = timer;
      scoreEl.textContent = score;
      gameOverEl.style.display = "none";
      displayWord();
      clearInterval(countdown);
      startGame();
    }

    startGame();
  </script>
</body>
</html>
